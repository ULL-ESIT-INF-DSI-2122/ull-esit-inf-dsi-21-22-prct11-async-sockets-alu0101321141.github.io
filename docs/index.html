<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>github-actions-sonar-cloud</title><meta name="description" content="Documentation for github-actions-sonar-cloud"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">github-actions-sonar-cloud</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> github-actions-sonar-cloud</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#práctica-11---cliente-y-servidor-para-una-aplicación-de-procesamiento-de-notas-de-texto" id="práctica-11---cliente-y-servidor-para-una-aplicación-de-procesamiento-de-notas-de-texto" style="color: inherit; text-decoration: none;">
  <h1>Práctica 11 - Cliente y servidor para una aplicación de procesamiento de notas de texto</h1>
</a>

<a href="#autor-vlatko-jesús-marchán-sekulic" id="autor-vlatko-jesús-marchán-sekulic" style="color: inherit; text-decoration: none;">
  <h2>Autor: Vlatko Jesús Marchán Sekulic.</h2>
</a>
<hr>

<a href="#calidad-y-seguridad-del-código-fuente-mediante-sonar-cloud" id="calidad-y-seguridad-del-código-fuente-mediante-sonar-cloud" style="color: inherit; text-decoration: none;">
  <h2>Calidad y seguridad del código fuente mediante Sonar Cloud</h2>
</a>
<p align="center">
    <a href="https://github.com/ULL-ESIT-INF-DSI-2122/github-actions-sonar-cloud/blob/master/LICENSE">
        <img alt="GitHub" src="https://img.shields.io/github/license/ULL-ESIT-INF-DSI-2122/github-actions-sonar-cloud">
    </a>
</p>

<hr>

<a href="#práctica-11" id="práctica-11" style="color: inherit; text-decoration: none;">
  <h2>Práctica 11.</h2>
</a>
<p>En esta practica se propone realizar un servidor y un cliente para la aplicación de procesamiento de notas de texto realizada en la práctica 9.</p>

<a href="#tipos-de-datos-para-los-mensajes-entre-cliente-y-servidor" id="tipos-de-datos-para-los-mensajes-entre-cliente-y-servidor" style="color: inherit; text-decoration: none;">
  <h3>tipos de datos para los mensajes entre cliente y servidor.</h3>
</a>
<p>Para implementar nuestra estructura <strong>Cliente y Servidor</strong> primero se definió los tipos de mensajes que se intercambiarán ambos. Para ello, se crearon <strong>RequestType</strong> y <strong>ResponseType</strong> que el primero será el tipo de mensaje que enviará el <em>cliente</em> para realizar una petición al servidor y el segundo será el tipo de mensaje que enviará el <em>Servidor</em> para responder al cliente.</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-3">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">type</span><span class="hl-1">: </span><span class="hl-5">&#39;add&#39;</span><span class="hl-1"> | </span><span class="hl-5">&#39;update&#39;</span><span class="hl-1"> | </span><span class="hl-5">&#39;remove&#39;</span><span class="hl-1"> | </span><span class="hl-5">&#39;read&#39;</span><span class="hl-1"> | </span><span class="hl-5">&#39;list&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">nameUser</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">title</span><span class="hl-1">?: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">body</span><span class="hl-1">?: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">color</span><span class="hl-1">?: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Donde el request tenemos, <strong>type</strong> que notificará al servidor el comando que deberá ejecutar. <strong>nameUser</strong> nombre del usuario que quiere usar el servidor. Y los atributos <strong>tilte, body y color</strong> que son opcionales ya que son la información de la nota que necesita enviar el usuario para realizar el comando en específico. (Y no es todas las operaciones es necesario enviar la información de una nota completa).</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">type</span><span class="hl-1">: </span><span class="hl-5">&#39;add&#39;</span><span class="hl-1"> | </span><span class="hl-5">&#39;update&#39;</span><span class="hl-1"> | </span><span class="hl-5">&#39;remove&#39;</span><span class="hl-1"> | </span><span class="hl-5">&#39;read&#39;</span><span class="hl-1"> | </span><span class="hl-5">&#39;list&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">success</span><span class="hl-1">: </span><span class="hl-3">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">notes</span><span class="hl-1">?: </span><span class="hl-3">NotasType</span><span class="hl-1">[];</span><br/><span class="hl-1">  </span><span class="hl-4">error</span><span class="hl-1">?: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>El tipo <strong>Response</strong> por su parte tiene una serie de atributos necesarios para poder procesar desde el cliente la información. <em>type</em> la respuesta del comando ejecutado, <em>success</em> el booleano que notifica si el comando se ejecuto correctamente, <em>color</em> el color de la respuesta. <em>notes</em> es un atributo opcional vector de tipo notas, <em>¿Qué es el tipo notas? -&gt; Es un tipo que se explicara a continucación</em>, el cual es opcional ya que todos los comandos no retornarán información. por otro lado, tenemos el tipo <em>error</em> este tipo es opcional ya que solo se rellenaría en caso de que se produzca uno.</p>
<p>Con lo que respecta al <em>tipoNotas</em> es un tipo que define el contenido de una nota. Este tipo se utilizará en todos los comandos que nos devuelvan información de las notas y por ello se estructura como:</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-3">NotasType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">body</span><span class="hl-1">?: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Como se puede observar, <em>title</em> contendrá el titulo de la nota, <em>color</em> el color de la nota y <em>body</em> el contenido, El contenido es un atributo opcional ya que comandos como <strong>listTitles</strong> no es necesario enviar el contenido.</p>
<hr>

<a href="#modificaciones-a-la-aplicación-de-notas-de-la-práctica-9" id="modificaciones-a-la-aplicación-de-notas-de-la-práctica-9" style="color: inherit; text-decoration: none;">
  <h3>Modificaciones a la aplicación de notas de la práctica 9.</h3>
</a>
<p>Para realizar dicha implementación fue necesario modificar el <em>retorno</em> de las funciones de dicha práctica para obtener la información correctamente formateada en el servidor para poder ser enviada.</p>
<p>Para ello tal y como se puede observar las funciones quedaron de esta manera:</p>
<ul>
<li><strong>addNotes:</strong> Se ha modificado la función para que retorne una tupla con un booleano y un string. De esta manera el <em>booleano</em> nos notifica si la ejecución del comando fue correcta y la <em>string</em> nos devolverá el mensaje informativo.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-6">addNotes</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">Notes</span><span class="hl-1">:</span><span class="hl-4">Notas</span><span class="hl-1">):[</span><span class="hl-4">boolean</span><span class="hl-1">, </span><span class="hl-4">string</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">archiveRoute</span><span class="hl-1">:</span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-5">&#39;./AppDataBase/&#39;</span><span class="hl-1"> + </span><span class="hl-4">nameUser</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Bienvenido de vuelta usuario&#39;</span><span class="hl-1">, </span><span class="hl-4">nameUser</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">archiveRoute</span><span class="hl-1"> = </span><span class="hl-4">archiveRoute</span><span class="hl-1"> + </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-4">Notes</span><span class="hl-1">.</span><span class="hl-6">getTitle</span><span class="hl-1">() + </span><span class="hl-5">&quot;.json&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Error, la nota ya existe.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">false</span><span class="hl-1">, </span><span class="hl-5">&quot;Error, la nota ya existe.&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">writeFileSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">, </span><span class="hl-4">Notes</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">());</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Se ha creado la nota satisfactoriamente&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">true</span><span class="hl-1">, </span><span class="hl-5">&quot;Se ha creado la nota satisfactoriamente&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&quot;Usuario Nuevo, bienvenido &quot;</span><span class="hl-1">, </span><span class="hl-4">nameUser</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">mkdirSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">, {</span><span class="hl-4">recursive:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">});</span><br/><span class="hl-1">      </span><span class="hl-4">archiveRoute</span><span class="hl-1"> = </span><span class="hl-4">archiveRoute</span><span class="hl-1"> + </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-4">Notes</span><span class="hl-1">.</span><span class="hl-6">getTitle</span><span class="hl-1">() + </span><span class="hl-5">&quot;.json&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">writeFileSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">, </span><span class="hl-4">Notes</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Se ha creado la nota satisfactoriamente&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">true</span><span class="hl-1">, </span><span class="hl-5">&quot;Se ha creado la nota satisfactoriamente&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>modifyNote:</strong> Al igual que el <em>addNotes</em> Se ha modificado la función para que retorne una tupla con un booleano y un string. De esta manera el <em>booleano</em> nos notifica si la ejecución del comando fue correcta y la <em>string</em> nos devolverá el mensaje informativo.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-6">modifyNote</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">modifyNote</span><span class="hl-1">:</span><span class="hl-4">Notas</span><span class="hl-1">):[</span><span class="hl-4">boolean</span><span class="hl-1">, </span><span class="hl-4">string</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">archiveRoute</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-5">&#39;./AppDataBase/&#39;</span><span class="hl-1"> + </span><span class="hl-4">nameUser</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">archiveRoute</span><span class="hl-1"> = </span><span class="hl-4">archiveRoute</span><span class="hl-1"> + </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-4">modifyNote</span><span class="hl-1">.</span><span class="hl-6">getTitle</span><span class="hl-1">() + </span><span class="hl-5">&quot;.json&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">writeFileSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">, </span><span class="hl-4">modifyNote</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;La nota se ha modificado satisfactoriamente&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">true</span><span class="hl-1">, </span><span class="hl-5">&quot;La nota se ha modificado satisfactoriamente&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;La nota que desea modificar no existe&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">false</span><span class="hl-1">, </span><span class="hl-5">&quot;La nota que desea modificar no existe&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li><strong>deleteNote:</strong></li>
</ul>
<pre><code class="language-typescript"><span class="hl-6">deleteNote</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">noteTilte</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">):[</span><span class="hl-4">boolean</span><span class="hl-1">, </span><span class="hl-4">string</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">archiveRoute</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-5">&#39;./AppDataBase/&#39;</span><span class="hl-1"> + </span><span class="hl-4">nameUser</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">archiveRoute</span><span class="hl-1"> = </span><span class="hl-4">archiveRoute</span><span class="hl-1"> + </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-4">noteTilte</span><span class="hl-1"> + </span><span class="hl-5">&quot;.json&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">rmSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;La nota se ha eliminado correctamente&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">true</span><span class="hl-1">, </span><span class="hl-5">&quot;La nota se ha eliminado correctamente&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Error dicha nota no existe&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">false</span><span class="hl-1">, </span><span class="hl-5">&quot;Error dicha nota no existe&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>listTitles:</strong> se modificó para que se nos enviara una tupla con un <em>booleano</em> para identificar si fue correcta la ejeción, un <em>string</em> con un mensaje que informa como ejecuto y un <em>array</em> con el contenido de las notas, correctamente formateado con <em>NotasType</em>.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-6">listTitles</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">): [</span><span class="hl-4">boolean</span><span class="hl-1">, </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">NotasType</span><span class="hl-1">[]] {</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">archiveRoute</span><span class="hl-1">:</span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-5">&#39;./AppDataBase/&#39;</span><span class="hl-1"> + </span><span class="hl-4">nameUser</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Las notas con sus títulos son:&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">archiveRoute</span><span class="hl-1"> += </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">nameFilesAndColors</span><span class="hl-1">:</span><span class="hl-3">NotasType</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">namefiles</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">readdirSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">namefiles</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-4">fileName</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">fileContent</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">( </span><span class="hl-4">archiveRoute</span><span class="hl-1"> + </span><span class="hl-4">fileName</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">json</span><span class="hl-1"> = </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-4">fileContent</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">());</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">printWithColor</span><span class="hl-1">(</span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">, </span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">nota</span><span class="hl-1">:</span><span class="hl-3">NotasType</span><span class="hl-1"> = {</span><br/><span class="hl-1">          </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">        </span><span class="hl-4">nameFilesAndColors</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-4">nota</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">true</span><span class="hl-1">, </span><span class="hl-5">&quot;El usuario tiene notas.&quot;</span><span class="hl-1">, </span><span class="hl-4">nameFilesAndColors</span><span class="hl-1">];</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;El usuario no existe&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">false</span><span class="hl-1">, </span><span class="hl-5">&quot;El usuario no existe&quot;</span><span class="hl-1">, []];</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>listNote:</strong> al igual que <strong>ListTitle</strong> se modificó para que se nos enviara una tupla con un <em>booleano</em> para identificar si fue correcta la ejeción, un <em>string</em> con un mensaje que informa como ejecuto y un <em>array</em> con el contenido de las notas, correctamente formateado con <em>NotasType</em>.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-6">listNote</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">noteTilte</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">): [</span><span class="hl-4">boolean</span><span class="hl-1">, </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">NotasType</span><span class="hl-1">[]] {</span><br/><span class="hl-1">    </span><span class="hl-4">noteTilte</span><span class="hl-1"> += </span><span class="hl-5">&quot;.json&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">archiveRoute</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-5">&#39;./AppDataBase/&#39;</span><span class="hl-1"> + </span><span class="hl-4">nameUser</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">flag</span><span class="hl-1">:</span><span class="hl-3">boolean</span><span class="hl-1"> = </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-4">archiveRoute</span><span class="hl-1"> += </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">namefiles</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">readdirSync</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">archiveRoute</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">notes</span><span class="hl-1">:</span><span class="hl-3">NotasType</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">      </span><span class="hl-4">namefiles</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-4">fileName</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">noteTilte</span><span class="hl-1"> == </span><span class="hl-4">fileName</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;La nota es: &#39;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">fileContent</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">(</span><span class="hl-4">archiveRoute</span><span class="hl-1"> + </span><span class="hl-4">fileName</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">json</span><span class="hl-1"> = </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-4">fileContent</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">());</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">printWithColor</span><span class="hl-1">(</span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">, </span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">printWithColor</span><span class="hl-1">(</span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">, </span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">printWithColor</span><span class="hl-1">(</span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">, </span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">nota</span><span class="hl-1">: </span><span class="hl-3">NotasType</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">body:</span><span class="hl-1"> </span><span class="hl-4">json</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">,</span><br/><span class="hl-1">          };</span><br/><span class="hl-1">          </span><span class="hl-4">notes</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-4">nota</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-4">flag</span><span class="hl-1"> = </span><span class="hl-2">true</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">flag</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">true</span><span class="hl-1">, </span><span class="hl-5">&quot;La nota se ha listado correctamente&quot;</span><span class="hl-1">, </span><span class="hl-4">notes</span><span class="hl-1">];</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;El usuario no tiene ninguna nota con ese nombre&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">false</span><span class="hl-1">, </span><span class="hl-5">&quot;El usuario no tiene ninguna nota con ese nombre&quot;</span><span class="hl-1">, []];</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;El usuario no existe&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> [</span><span class="hl-2">false</span><span class="hl-1">, </span><span class="hl-5">&quot;El usuario no existe&quot;</span><span class="hl-1">, []];</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>Además también se modifico las llamadas de los comandos de la <strong>App-Notas</strong> que se explicará más adelante. Por otro lado, La implementación de la clase <strong>Notas</strong> no se ha visto modificada.</p>
<hr>

<a href="#implementación-del-servidor" id="implementación-del-servidor" style="color: inherit; text-decoration: none;">
  <h3>Implementación del servidor.</h3>
</a>
<p>Para la implementación del servidor se optó por crear una <strong>clase Servidor</strong></p>
<ul>
<li><strong>constructor:</strong> En el constructor pedimos el puerto con el que se quiere iniciar el servidor. una vez optenido el dato procedemos a crear el servidor. El servidor se creó con la opción <strong>{ allowHalfOpen: true }</strong> dicha opción lo que nos permite es que al cliente enviar toda la información y terminar con un <em>socket.end()</em> que el socket del servidor no se bloquee y este pueda enviarle la respuesta a su petición. Por otro lado, controlamos si se produce un error en la creación y en caso de que se cierre la comunicación con el cliente que quede a la espera de nuevos clientes. Además el server, se guradará en un atributo privado para poder se invocado desde otros métodos de la clase.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-8">server</span><span class="hl-1">: </span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-4">Server</span><span class="hl-1">;</span><br/><br/><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">port</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">server</span><span class="hl-1"> = </span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-6">createServer</span><span class="hl-1">({ </span><span class="hl-4">allowHalfOpen:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1"> }, (</span><span class="hl-4">connection</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-5">&#39;error&#39;</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Error en la creación del servidor:&#39;</span><span class="hl-1">, </span><span class="hl-4">err</span><span class="hl-1">));</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-5">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgWhiteBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Servidor cerrado correctamente.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgWhiteBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Esperando a nuevos usuarios.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }).</span><span class="hl-6">listen</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">port</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Se ha iniciado el servidor.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>onHold():</strong> es un método de la clase que pondrá a nuestro servidor a la espera de nuevas peticiones de nuestros usuarios. De esta manera cada vez que se conecte un usuario se nos notificará que el cliente está conectado. Por otro lado, está función se encargará de procesar las peticiones de nuestros usuarios. Para ello guardará el mensaje que nos envie el cliente y cuando finalice de obtener los datos. Realiará un parse de los datos, y dependiendo del tipo del mensaje realizará una acción u otra.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-6">onHold</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">server</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-5">&#39;connection&#39;</span><span class="hl-1">, (</span><span class="hl-4">connection</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Cliente conectado.&#39;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">      </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">Datos</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-5">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-9">// Obtenermos los datos que nos envíe el cliente.</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-5">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-4">data</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">Datos</span><span class="hl-1"> += </span><span class="hl-4">data</span><span class="hl-1">;</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-5">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-9">// Parseamos los datos que nos envió el cliente.</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">message</span><span class="hl-1"> = </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-4">Datos</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39; -&gt; Mensaje del cliente recibido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;add&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">addPetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;update&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">updatePetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;remove&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">removePetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;read&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">readPetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;list&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">listPetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">default</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Error: El tipo de mensaje no es correcto.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>private addPetitions:</strong> esta función se encargará de procesar la petición <em>add</em> para ello obtiene los datos dados por el usuario y llama a la función de nuestra aplicación de <strong>Gestor de notas</strong>. Tras esto optendrá el resultado de la función y dependiendo de su resultado creará un mensaje de respuesta satisdactoria. o por el contrario un mensaje de error. que será enviada al cliente y cerrado la conección.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-6">addPetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">:</span><span class="hl-4">any</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">:</span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-4">Socket</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgYellowBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Mensaje de tipo add recibido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">gestorNotas</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">GestorNotas</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">nota</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Notas</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">resultado</span><span class="hl-1">: [</span><span class="hl-3">boolean</span><span class="hl-1">, </span><span class="hl-3">string</span><span class="hl-1">] = </span><span class="hl-4">gestorNotas</span><span class="hl-1">.</span><span class="hl-6">addNotes</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">nameUser</span><span class="hl-1">, </span><span class="hl-4">nota</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">resultado</span><span class="hl-1">[</span><span class="hl-10">0</span><span class="hl-1">]) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">error:</span><span class="hl-1"> </span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">resultado</span><span class="hl-11">[</span><span class="hl-10">1</span><span class="hl-11">]</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>private updatePetitions:</strong> se encargará de procesar las peticiones de <em>update</em> que modificarán las notas, al igual que con el comando <em>add</em> procederemos a procesar los datos pasados por el cliente y llamamos a la función del <strong>Gestor de notas</strong> modify notes y dependiendo de su resultado enviar los mensajes de satisfacción o error en ejecución.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-6">updatePetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">: </span><span class="hl-4">any</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">: </span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-4">Socket</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgYellowBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Mensaje de tipo update recibido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">gestorNotas</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">GestorNotas</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">nota</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Notas</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">resultado</span><span class="hl-1">: [</span><span class="hl-3">boolean</span><span class="hl-1">, </span><span class="hl-3">string</span><span class="hl-1">] = </span><span class="hl-4">gestorNotas</span><span class="hl-1">.</span><span class="hl-6">modifyNote</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">nameUser</span><span class="hl-1">, </span><span class="hl-4">nota</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">resultado</span><span class="hl-1">[</span><span class="hl-10">0</span><span class="hl-1">]) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;update&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;update&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">error:</span><span class="hl-1"> </span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">resultado</span><span class="hl-11">[</span><span class="hl-10">1</span><span class="hl-11">]</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>private removePetitions:</strong> se encargará de procesar las peticiones de <em>remove</em> que eliminará una nota, al igual que con el comando <em>update</em> procederemos a procesar los datos pasados por el cliente y llamamos a la función del <strong>Gestor de notas</strong> deleteNotes y dependiendo de su resultado enviar los mensajes de satisfacción o error en ejecución.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-1">  </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-6">removePetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">: </span><span class="hl-4">any</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">: </span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-4">Socket</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgYellowBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Mensaje de tipo remove recibido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">gestorNotas</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">GestorNotas</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">resultado</span><span class="hl-1">: [</span><span class="hl-3">boolean</span><span class="hl-1">, </span><span class="hl-3">string</span><span class="hl-1">] = </span><span class="hl-4">gestorNotas</span><span class="hl-1">.</span><span class="hl-6">deleteNote</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">nameUser</span><span class="hl-1">, </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">resultado</span><span class="hl-1">[</span><span class="hl-10">0</span><span class="hl-1">]) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">error:</span><span class="hl-1"> </span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">resultado</span><span class="hl-11">[</span><span class="hl-10">1</span><span class="hl-11">]</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>private readPetitions:</strong> se encargará de procesar las peticiones de <em>read</em> que leerá una nota preexistente, al igual que con el comando <em>remove</em> procederemos a procesar los datos pasados por el cliente y llamamos a la función del <strong>Gestor de notas</strong> listNote a diferencia de los comandos anteriores a parte de enviar en el mensaje satisfacción del comando se enviará la nota con su contenido. Y como en los anteriores en caso de fallo se enviará el mensaje de error.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-6">readPetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">: </span><span class="hl-4">any</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">: </span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-4">Socket</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgYellowBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Mensaje de tipo read recibido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">gestorNotas</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">GestorNotas</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">resultado</span><span class="hl-1">: [</span><span class="hl-3">boolean</span><span class="hl-1">, </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-3">NotasType</span><span class="hl-1">[]] = </span><span class="hl-4">gestorNotas</span><span class="hl-1">.</span><span class="hl-6">listNote</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">nameUser</span><span class="hl-1">, </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">resultado</span><span class="hl-1">[</span><span class="hl-10">0</span><span class="hl-1">]) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">notes:</span><span class="hl-1"> </span><span class="hl-4">resultado</span><span class="hl-1">[</span><span class="hl-10">2</span><span class="hl-1">],</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">error:</span><span class="hl-1"> </span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">resultado</span><span class="hl-11">[</span><span class="hl-10">1</span><span class="hl-11">]</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>private listPetitions:</strong> ser encargará de procesar las peticiones de <em>list</em> que listará los titulos de las notas del usuario, al igual que con el comando <em>read</em> procederemos a procesar los datos pasados por el cliente y llamamos a la función del <strong>Gestor de notas</strong> listTitles al igual que el comando <em>read</em> este comando enviará en su mensaje de correcto la información de las notas sin embargo esta solo enviará su contenido de notas sus titulos color. al igual que en los anteriores en caso de fallar se enviará el mensaje de error.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-6">listPetitions</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">: </span><span class="hl-4">any</span><span class="hl-1">, </span><span class="hl-4">connection</span><span class="hl-1">: </span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-4">Socket</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgYellowBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Mensaje de tipo update recibido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">gestorNotas</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">GestorNotas</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">resultado</span><span class="hl-1">: [</span><span class="hl-3">boolean</span><span class="hl-1">, </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-3">NotasType</span><span class="hl-1">[]] = </span><span class="hl-4">gestorNotas</span><span class="hl-1">.</span><span class="hl-6">listTitles</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">nameUser</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">resultado</span><span class="hl-1">[</span><span class="hl-10">0</span><span class="hl-1">]) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">notes:</span><span class="hl-1"> </span><span class="hl-4">resultado</span><span class="hl-1">[</span><span class="hl-10">2</span><span class="hl-1">],</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">error:</span><span class="hl-1"> </span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-4">resultado</span><span class="hl-11">[</span><span class="hl-10">1</span><span class="hl-11">]</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<hr>

<a href="#implementación-de-la-aplicación-servidor" id="implementación-de-la-aplicación-servidor" style="color: inherit; text-decoration: none;">
  <h3>Implementación de la aplicación Servidor.</h3>
</a>
<p>Para crear el servidor se desarrolló un <em>Launcher-Server</em> que contiene el comando <strong>Launch</strong> que lo que realizará es crear el servidor con el numero de puerto dado y ponerlo en modo <em>OnHold</em>. Se creó para crear de forma más comoda el servidor.</p>
<pre><code class="language-typescript"><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-6">command</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-5">&#39;launch&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-5">&#39;Añade una nota nueva&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">port:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-5">&#39;puerto del servidor&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">port</span><span class="hl-1"> === </span><span class="hl-5">&#39;number&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">server</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Server</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">port</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">server</span><span class="hl-1">.</span><span class="hl-6">onHold</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<hr>

<a href="#implementación-del-cliente" id="implementación-del-cliente" style="color: inherit; text-decoration: none;">
  <h2>Implementación del cliente.</h2>
</a>
<p>Para la implementación del cliente, al igual que en el servidor se optó por crear una <em>clase cliente</em>:</p>
<ul>
<li><strong>constructor:</strong> En el constructor creamos un socket de conección al servido y lo guardamos en un atributo privado.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-8">socket</span><span class="hl-1">:</span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-4">Socket</span><span class="hl-1">;</span><br/><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">port</span><span class="hl-1">:</span><span class="hl-4">number</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">socket</span><span class="hl-1"> = </span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-6">connect</span><span class="hl-1">({ </span><span class="hl-4">port:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">port</span><span class="hl-1"> });</span><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li><strong>sendPetitions:</strong> Se encargará de procesar las peticiones al servidor para pedir la ejecución de uno de los comandos especificados. (Para ello utilizará las funciones Petitions que se explicarán más delante.)</li>
</ul>
<pre><code class="language-typescript"><span class="hl-6">sendPetitions</span><span class="hl-1">(</span><span class="hl-4">type</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">nameUser</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">?:</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">body</span><span class="hl-1">?:</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">color</span><span class="hl-1">?:</span><span class="hl-4">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">type</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;add&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">addPetition</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">!, </span><span class="hl-4">body</span><span class="hl-1">!, </span><span class="hl-4">color</span><span class="hl-1">!);</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;update&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">updatePetition</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">!, </span><span class="hl-4">body</span><span class="hl-1">!, </span><span class="hl-4">color</span><span class="hl-1">!);</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;remove&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">removePetition</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">!);</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;read&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">readPetition</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">!);</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;list&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">listPetition</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">default</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Error: El tipo de mensaje no es correcto.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>receivePetition:</strong> Se encargará de obtener la información de la respuesta del servidor.</li>
</ul>
<pre><code class="language-typescript"><span class="hl-6">receivePetition</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-9">// obtenemos la respuesta del servidor.</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">response</span><span class="hl-1">:</span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-5">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">socket</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-5">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-4">data</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">response</span><span class="hl-1"> += </span><span class="hl-4">data</span><span class="hl-1">;</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">socket</span><span class="hl-1">.</span><span class="hl-6">on</span><span class="hl-1">(</span><span class="hl-5">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">message</span><span class="hl-1"> = </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Mensaje del servidor recibido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;add&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">addResponse</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;update&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">updateResponse</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;remove&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">removeResponse</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;read&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">readResponse</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-5">&#39;list&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">listResponse</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-0">default</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Error: El tipo de mensaje no es correcto.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>addPetition:</strong> se encargará de crear el mensaje de petición, enviando el tipo de comando y la información asociada (EL resto de peticiones siguen la misma lógica).</li>
</ul>
<pre><code class="language-typescript"><span class="hl-1">  </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-6">addPetition</span><span class="hl-1">(</span><span class="hl-4">nameUser</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">body</span><span class="hl-1"> : </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">color</span><span class="hl-1"> : </span><span class="hl-4">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-3">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">nameUser:</span><span class="hl-1"> </span><span class="hl-4">nameUser</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">title</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">body:</span><span class="hl-1"> </span><span class="hl-4">body</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">color</span><span class="hl-1">,</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">socket</span><span class="hl-1">.</span><span class="hl-6">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">request</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">socket</span><span class="hl-1">.</span><span class="hl-6">end</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span>
</code></pre>
<ul>
<li><strong>addResponse:</strong> se encarga de procesar el mensaje recibido del servidor. (El resto de Response siguen la misma lógica pero con sus propios datos).</li>
</ul>
<pre><code class="language-typescript"><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-6">addResponse</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">:</span><span class="hl-4">any</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgYellowBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Respuesta de tipo add recibido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgGreenBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Nota añadida correctamente.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&#39;Se ha producido un error al crear la nota.&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-6">bgRedBright</span><span class="hl-1">(</span><span class="hl-5">&quot;Err:&quot;</span><span class="hl-1">, </span><span class="hl-4">message</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<hr>

<a href="#app-notas" id="app-notas" style="color: inherit; text-decoration: none;">
  <h2>App-notas</h2>
</a>
<p>En el caso de <strong>App_notas</strong> se han modificado todos los comandos seguiendo la lógica:</p>
<pre><code class="language-typescript"><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-6">command</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-5">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-5">&#39;Añade una nota nueva&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-5">&#39;name User&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-5">&#39;Note title&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">body:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-5">&#39;Note body&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-5">&#39;Note color&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-5">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> ((</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-5">&#39;string&#39;</span><span class="hl-1">) &amp;&amp; (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1"> === </span><span class="hl-5">&#39;string&#39;</span><span class="hl-1">) &amp;&amp; (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1"> === </span><span class="hl-5">&#39;string&#39;</span><span class="hl-1">) &amp;&amp;</span><br/><span class="hl-1">      (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> === </span><span class="hl-5">&#39;string&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">cliente</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Cliente</span><span class="hl-1">(</span><span class="hl-10">60300</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">cliente</span><span class="hl-1">.</span><span class="hl-6">sendPetitions</span><span class="hl-1">(</span><span class="hl-5">&#39;add&#39;</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">cliente</span><span class="hl-1">.</span><span class="hl-6">receivePetition</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Creando la clase cliente con el puerto correspondiente al servidor (En nuestro caso siempre lo crearemos en el 60300). Y tras ello hacer la petición adecuada. y depués poner el cliente a la espera.</p>
<hr>

<a href="#pruebas-desarolladas" id="pruebas-desarolladas" style="color: inherit; text-decoration: none;">
  <h3>Pruebas desarolladas.</h3>
</a>
<p>Para realizar las pruebas a las clases, se reutilizaron por una parte las pruebas de la práctica 9 modificando su resultado a el nuevo formato y además desarrollamos una prueba para el Servidor y otra para el cliente. </p>
<p>¡¡¡¡¡ Importante !!!!! -&gt; Al ejecutar las pruebas para que no de problemas hay que hacerlo sin la carpeta AppDatabase. Ya que de existir y tener el mismo contenido que se crea en las pruebas puede llegar a dar errores.</p>
<blockquote>
<p>Se necesito hacer una pequeña modificación en las pruebas de la modificación, para no tener que estar abriendo el server a mano. (Se creo una variable que se llama jutamente antes). y además cambiarles los puertos para que no colisionara con las pruebas nuevas.</p>
</blockquote>
<p>Por otro lado para comprobar el funcionamiento del server y del cliente se realizó una prueba sencilla para comprobar si son capaces de recibir correctamente la información.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/Practica_GestorNotas.html">Practica/<wbr/>Gestor<wbr/>Notas</a></li><li class=" tsd-kind-module"><a href="modules/Practica_Notas.html">Practica/<wbr/>Notas</a></li><li class=" tsd-kind-module"><a href="modules/Practica_Server.html">Practica/<wbr/>Server</a></li><li class=" tsd-kind-module"><a href="modules/modificacion_Client.html">modificacion/<wbr/>Client</a></li><li class=" tsd-kind-module"><a href="modules/modificacion_Server.html">modificacion/<wbr/>Server</a></li><li class=" tsd-kind-module"><a href="modules/modificacion_TypesMessages_RequestType.html">modificacion/<wbr/>Types<wbr/>Messages/<wbr/>Request<wbr/>Type</a></li><li class=" tsd-kind-module"><a href="modules/modificacion_TypesMessages_ResponseType.html">modificacion/<wbr/>Types<wbr/>Messages/<wbr/>Response<wbr/>Type</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>